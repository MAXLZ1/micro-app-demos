{"version":3,"file":"static/js/997.f1fee4c0.chunk.js","mappings":"8aAKaA,EAAeC,oEACfC,EAAeD,oEAEtBE,EAA4B,CAChCC,QAAS,CACPC,KAAM,UACNC,MAAON,EACPO,WAAY,aAEdC,QAAS,CACPH,KAAM,UACNC,MAAOJ,EACPK,WAAY,cAIVE,EAAU,CACd,CACEJ,KAAM,UACNK,KAAM,UACNC,SAAU,CACR,CAAEN,KAAM,+CAAkBK,KAAM,+BAChC,CAAEL,KAAM,iEAAqBK,KAAM,4BAGvC,CACEL,KAAM,UACNK,KAAM,UACNC,SAAW,CACT,CAAEN,KAAM,+CAAkBK,KAAM,+BAChC,CAAEL,KAAM,iEAAqBK,KAAM,6BAKrCE,EAA4B,KAE1BC,EAAOC,EAAAA,EAAAA,WAAiBD,KAAKA,KAEpB,SAASE,IAEtB,IAAMC,EAAY,yCAAG,WAAOC,GAAP,6FACQA,EADR,GACZC,EADY,KACHC,EADG,MAEfP,GAAqC,YAAzBA,EAASQ,YAFN,gCAGXR,EAASS,UAHE,OAIjBT,EAAW,KAJM,cAMnBA,GAAWU,EAAAA,EAAAA,KAAa,kBACnBnB,EAAKe,IADa,IAErBK,UAAW,oBACXC,MAAO,CACLd,KAAMS,KAEP,CACDM,QAAS,CACPC,4BAA4B,KAdb,SAiBbd,EAASe,aAjBI,OAmBnBC,OAAOC,cAAc,IAAIC,YAAY,aAAc,CACjDC,OAAQlB,KApBS,2CAAH,sDAwBlB,OACE,+BACE,qBAAOmB,KAAM,GAAIC,MAAO,CAAEC,MAAO,QAASC,UAAU,WAApD,WACE,oBAAOC,QAAQ,0IAAsCC,KAAK,aAC1D,wBACE,mBAAWC,MAAM,qEAAjB,UACE,cACEL,MAAO,CAAEC,MAAO,SAChBK,cAAc,QACd9B,QAASA,EACT+B,WAAY,CAACF,MAAO,OAAQrB,MAAO,QACnCwB,SAAUzB,SAIhB,gBAAK0B,GAAG,yBAIf,C","sources":["views/MicroAppView/index.tsx"],"sourcesContent":["import { Alert, Cascader, Form, Space } from 'antd'\nimport type { MicroApp } from 'qiankun'\nimport { loadMicroApp } from 'qiankun'\nimport { store } from '@/stores/store'\n\nexport const vue2AppEntry = process.env.REACT_APP_VUE2_CHILD_PUBLIC_PATH\nexport const viteAppEntry = process.env.REACT_APP_VITE_CHILD_PUBLIC_PATH\n\nconst apps: Record<string, any> = {\n  vue2App: {\n    name: 'vue2App',\n    entry: vue2AppEntry,\n    activeRule: '#/vue2App',\n  },\n  viteApp: {\n    name: 'viteApp',\n    entry: viteAppEntry,\n    activeRule: '#/viteApp',\n  },\n}\n\nconst options = [\n  {\n    name: 'vue2App',\n    path: 'vue2App',\n    children: [\n      { name: 'vue2App-通信测试页面', path: '/vue2App/communication-test' },\n      { name: 'vue2App-子应用跳转测试页面', path: '/vue2App/navigate-view' },\n    ]\n  },\n  {\n    name: 'viteApp',\n    path: 'viteApp',\n    children:  [\n      { name: 'viteApp-通信测试页面', path: '/viteApp/communication-test' },\n      { name: 'viteApp-子应用跳转测试页面', path: '/viteApp/navigate-view' },\n    ]\n  }\n]\n\nlet microApp: MicroApp | null = null\n\nconst user = store.getState().user.user\n\nexport default function MicroAppView() {\n\n  const handleChange = async (value: any) => {\n    const [appName, appPath] = value\n    if (microApp && microApp.getStatus() === 'MOUNTED') {\n      await microApp.unmount()\n      microApp = null\n    }\n    microApp = loadMicroApp({\n      ...apps[appName],\n      container: '#micapp-container',\n      props: {\n        path: appPath,\n      }\n    }, {\n      sandbox: {\n        experimentalStyleIsolation: true\n      }\n    })\n    await microApp.mountPromise\n    // 更新子应用用户信息\n    window.dispatchEvent(new CustomEvent('changeUser', {\n      detail: user\n    }))\n  }\n\n  return (\n    <>\n      <Space size={20} style={{ width: '100%'}} direction=\"vertical\">\n        <Alert message=\"这是React18子应用作为主应用，挂载Vue2子应用或Vite子应用\" type=\"success\" />\n        <Form>\n          <Form.Item label=\"选择要加载的子应用页面\">\n            <Cascader\n              style={{ width: '400px'}}\n              expandTrigger=\"hover\"\n              options={options}\n              fieldNames={{label: 'name', value: 'path'}}\n              onChange={handleChange}\n            />\n          </Form.Item>\n        </Form>\n        <div id=\"micapp-container\"></div>\n      </Space>\n    </>\n  )\n}\n"],"names":["vue2AppEntry","process","viteAppEntry","apps","vue2App","name","entry","activeRule","viteApp","options","path","children","microApp","user","store","MicroAppView","handleChange","value","appName","appPath","getStatus","unmount","loadMicroApp","container","props","sandbox","experimentalStyleIsolation","mountPromise","window","dispatchEvent","CustomEvent","detail","size","style","width","direction","message","type","label","expandTrigger","fieldNames","onChange","id"],"sourceRoot":""}