import{w as X,t as Y,d as q,u as Z,r as i,g as N,c as ee,_ as y,a as l,C as ne,i as te,b as ae,e as oe,v as se,f as z,T as le,P as w,h as ue,I as ce,j as ie,E as re,k as pe,l as de,m as me,n as fe,s as U,o as ve,p as _e,q as R,x as ye,G,y as Ce,z as he,A as ge,B as C,D as h,F as u,H as E,J as H,K as xe}from"./index.6d0babf4.js";import{B as Ae,_ as we}from"./index.1605f1f1.js";import{_ as Ee,a as Ie}from"./index.4d1b6de5.js";import{c as ke}from"./index.3bfde8d1.js";import"./index.b794ba38.js";var be={success:ue,info:ce,error:ie,warning:re},Fe={success:pe,info:de,error:me,warning:fe},Be=Y("success","info","warning","error"),Ve=function(){return{type:w.oneOf(Be),closable:{type:Boolean,default:void 0},closeText:w.any,message:w.any,description:w.any,afterClose:Function,showIcon:{type:Boolean,default:void 0},prefixCls:String,banner:{type:Boolean,default:void 0},icon:w.any,closeIcon:w.any,onClose:Function}},De=q({name:"AAlert",inheritAttrs:!1,props:Ve(),setup:function(o,v){var r=v.slots,g=v.emit,m=v.attrs,x=v.expose,A=Z("alert",o),O=A.prefixCls,B=A.direction,f=i(!1),I=i(!1),k=i(),V=function(n){n.preventDefault();var t=k.value;t.style.height="".concat(t.offsetHeight,"px"),t.style.height="".concat(t.offsetHeight,"px"),f.value=!0,g("close",n)},b=function(){var n;f.value=!1,I.value=!0,(n=o.afterClose)===null||n===void 0||n.call(o)};x({animationEnd:b});var s=i({});return function(){var e,n,t=o.banner,p=o.closeIcon,D=p===void 0?(n=r.closeIcon)===null||n===void 0?void 0:n.call(r):p,c=o.closable,d=o.type,_=o.showIcon,F=N(r,o,"closeText"),P=N(r,o,"description"),L=N(r,o,"message"),T=N(r,o,"icon");_=t&&_===void 0?!0:_,d=t&&d===void 0?"warning":d||"info";var J=(P?Fe:be)[d]||null;F&&(c=!0);var a=O.value,K=ee(a,(e={},y(e,"".concat(a,"-").concat(d),!0),y(e,"".concat(a,"-closing"),f.value),y(e,"".concat(a,"-with-description"),!!P),y(e,"".concat(a,"-no-icon"),!_),y(e,"".concat(a,"-banner"),!!t),y(e,"".concat(a,"-closable"),c),y(e,"".concat(a,"-rtl"),B.value==="rtl"),e)),$=c?l("button",{type:"button",onClick:V,class:"".concat(a,"-close-icon"),tabindex:0},[F?l("span",{class:"".concat(a,"-close-text")},[F]):D===void 0?l(ne,null,null):D]):null,Q=T&&(te(T)?ke(T,{class:"".concat(a,"-icon")}):l("span",{class:"".concat(a,"-icon")},[T]))||l(J,{class:"".concat(a,"-icon")},null),W=ae("".concat(a,"-motion"),{appear:!1,css:!0,onAfterLeave:b,onBeforeLeave:function(S){S.style.maxHeight="".concat(S.offsetHeight,"px")},onLeave:function(S){S.style.maxHeight="0px"}});return I.value?null:l(le,W,{default:function(){return[oe(l("div",z(z({role:"alert"},m),{},{style:[m.style,s.value],class:[m.class,K],"data-show":!f.value,ref:k}),[_?Q:null,l("div",{class:"".concat(a,"-content")},[L?l("div",{class:"".concat(a,"-message")},[L]):null,P?l("div",{class:"".concat(a,"-description")},[P]):null]),$]),[[se,!f.value]])]}})}}});const Pe=X(De);const Te={name:"CoexistMicroApp"},Se=q({...Te,setup(M){const o=i(null),v=i(null),r=i(null),g=i(!0),m=i(!0),x=i(!0),{apps:A}=U(ve()),{user:O}=U(_e()),B=R(()=>{const t=A.value.find(p=>p.name==="vue2App");return{...t,name:t.name+"Coexist"}}),f=R(()=>{const t=A.value.find(p=>p.name==="reactApp");return{...t,name:t.name+"Coexist"}}),I=R(()=>{const t=A.value.find(p=>p.name==="viteApp");return{...t,name:t.name+"Coexist"}});function k(){g.value=!g.value}function V(){m.value=!m.value}function b(){x.value=!x.value}let s=null,e=null,n=null;return ye(async()=>{[s,e,n]=await Promise.all([G.loadApp(B.value.name,{domGetter:()=>o.value,entry:B.value.entry,basename:"/coexist-micro-app",props:{path:"/communication-test"}}),G.loadApp(f.value.name,{domGetter:()=>v.value,entry:f.value.entry,basename:"/coexist-micro-app",props:{path:"/communication-test"}}),G.loadApp(I.value.name,{domGetter:()=>r.value,entry:I.value.entry,basename:"/coexist-micro-app",sandbox:!1,props:{path:"/communication-test"}})]),await await Promise.all([s==null?void 0:s.mount(),e==null?void 0:e.mount(),n==null?void 0:n.mount()]),window.Garfish.channel.emit("userInfo",Ce(O.value))}),he(()=>{g.value?s&&!s.mounted&&s.mount():s&&s.mounted&&s.unmount(),m.value?e&&!e.mounted&&e.mount():e&&e.mounted&&e.unmount(),x.value?n&&!n.mounted&&n.mount():n&&n.mounted&&n.unmount()}),ge(()=>{s&&s.mounted&&s.unmount(),e&&e.mounted&&e.unmount()}),(t,p)=>{const D=Pe,c=Ae,d=Ee,_=Ie,F=we;return C(),h(F,{direction:"vertical",size:40,class:"box"},{default:u(()=>[l(D,{message:"\u5DE6\u4E0A\u5E94\u7528\u4E3AVue2\u5B50\u5E94\u7528\uFF0C\u53F3\u4E0A\u5E94\u7528\u4E3AReact18\u5B50\u5E94\u7528\uFF0C\u5DE6\u4E0B\u5E94\u7528\u4E3AVite\u5B50\u5E94\u7528\u3002",type:"success"}),l(_,{gutter:20},{default:u(()=>[l(d,{span:12},{default:u(()=>[g.value?(C(),h(c,{key:0,type:"primary",danger:"",onClick:k},{default:u(()=>[E(" \u5378\u8F7DVue2\u5E94\u7528 ")]),_:1})):(C(),h(c,{key:1,type:"primary",onClick:k},{default:u(()=>[E(" \u52A0\u8F7DVue2\u5E94\u7528 ")]),_:1})),H("div",{ref_key:"one",ref:o},null,512)]),_:1}),l(d,{span:12},{default:u(()=>[m.value?(C(),h(c,{key:0,type:"primary",danger:"",onClick:V},{default:u(()=>[E(" \u5378\u8F7DReact18\u5E94\u7528 ")]),_:1})):(C(),h(c,{key:1,type:"primary",onClick:V},{default:u(()=>[E(" \u52A0\u8F7DReact18\u5E94\u7528 ")]),_:1})),H("div",{ref_key:"two",ref:v},null,512)]),_:1}),l(d,{span:12},{default:u(()=>[x.value?(C(),h(c,{key:0,type:"primary",danger:"",onClick:b},{default:u(()=>[E(" \u5378\u8F7DVite\u5E94\u7528 ")]),_:1})):(C(),h(c,{key:1,type:"primary",onClick:b},{default:u(()=>[E(" \u52A0\u8F7DVite\u5E94\u7528 ")]),_:1})),H("div",{ref_key:"three",ref:r},null,512)]),_:1})]),_:1})]),_:1})}}});const Me=xe(Se,[["__scopeId","data-v-51f0df40"]]);export{Me as default};
